# ======================
# Project1 - PHP 7.2 站点
# ======================
server {
    listen 80;
    server_name project1.local www.project1.local;
    
    root /var/www/html/project1;
    index index.php index.html;
    
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    
    location ~ \.php$ {
        fastcgi_pass php72:9000;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param SCRIPT_NAME $fastcgi_script_name;
    }
}

# ======================
# Project2 - PHP 7.4 站点
# ======================
server {
    listen 80;
    server_name project2.local www.project2.local;
    
    root /var/www/html/project2;
    index index.php index.html;
    
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    
    location ~ \.php$ {
        fastcgi_pass php74:9000;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param SCRIPT_NAME $fastcgi_script_name;
    }
}

# ======================
# Project3 - PHP 8.2 站点
# ======================
server {
    listen 80;
    server_name project3.local www.project3.local;
    
    root /var/www/html/project3;
    index index.php index.html;
    
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    
    location ~ \.php$ {
        fastcgi_pass php82:9000;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param SCRIPT_NAME $fastcgi_script_name;
    }
}

# ======================
# 默认站点（可选）
# ======================
server {
    listen 80 default_server;
    server_name _;
    
    root /var/www/html;
    index index.html;
    
    location / {
        return 301 http://project1.local;
    }
}
